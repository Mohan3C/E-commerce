{% extends 'base.html' %}

{% block content %}

<div class=" flex flex-wrap items-center text-black font-bold bg-sky-100 px-[5%] py-5 gap-5">

    <a href="{% url 'homepage' %}" class="hover:underline hover:decoration-2 hover:decoration-red-500">All</a>

    {% for i in categories %}

    <a href="{% url 'filter' i.id %}" class="hover:underline hover:decoration-2 hover:decoration-red-500">{{i.name}}</a>

    {% endfor %}
</div>


<div class="md:ml-auto md:mr-auto flex flex-wrap items-center text-black  px-[5%] py-10 gap-5">



    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5 items-stretch ">
        {% for i in page_obj %}
        <!-- i make changes in loop for pagination. i change products to page_obj  -->
        <a href="{% url 'viewproduct' i.id %}" class="bg-slate-100 h-full">

            <div class=" border rounded-lg shadow-lg flex flex-col ">
                <img src="{{i.image.url}}" class="w-full h-72 object-cover  rounded-t-lg "
                    alt="{{i.title}}">

                <div class="p-3 flex flex-col justify-between flex-grow">
                    <h2 class="px-3 py-2 font-bold truncate  h-12" title="{{i.title}}">{{i.title}}</h2>
                    <p class="px-3 font-semibold truncate  h-6 ">{{i.brand}}</p>
                    <h3 class="px-3 py-1 truncate  h-6">₹{{i.discount_price}} <del>₹{{i.price}}</del></h3>
                </div>
            </div>

        </a>
        {% endfor %}
    </div>
    <div class="flex justify-center mt-6 space-x-2">
        {% if page_obj.has_previous %}
        <a href="?page={{ page_obj.previous_page_number }}" class="px-3 py-1 bg-blue-200 rounded hover:bg-blue-400">Previous</a>
        {% endif %}

        <span class="px-3 py-1 bg-gray-300 rounded">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages}}</span>

        {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}" class="px-3 py-1 bg-blue-200 hover:bg-blue-400 rounded">Next</a>
        {% endif %}
    </div>



</div>



{% endblock %}